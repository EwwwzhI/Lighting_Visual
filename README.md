# 多点颜色分析工具

一个基于Python的图像颜色分析工具，可以选择图像中的多个点，分析其在不同色彩空间中的坐标值，并生成专业的色度图和LAB色彩空间三维可视化。

## 主要功能

- 📸 **图像加载与显示**：支持PNG、JPG、JPEG、BMP、GIF等常见图片格式
- 🎯 **多点选择**：支持在图像上选择最多10个分析点
- 🎨 **色彩空间转换**：自动计算RGB、CIE 1931 xy、CIE 1976 u'v'、CIELAB坐标
- 📊 **可视化图表**：
  - CIE 1931色度图
  - CIE 1976 UCS色度图
  - LAB色彩空间三维球体模型
- 💾 **导出功能**：支持保存标记图像和各类分析图表
- 🔍 **图像缩放**：支持图像放大/缩小和平移操作

## 环境要求

- Python 3.7 或更高版本
- Windows / macOS / Linux

## 安装步骤

### 1. 克隆或下载项目

```bash
git clone https://github.com/EwwwzhI/Lighting_Visual.git
cd Lighting_Visual
```

### 2. 安装依赖包

```bash
pip install -r requirements.txt
```

或手动安装以下依赖：

```bash
pip install pillow numpy matplotlib scikit-image colour-science
```

### 3. 运行程序

```bash
python color_analyzer.py
```

## 依赖包说明

| 包名           | 版本要求 | 用途           |
| -------------- | -------- | -------------- |
| Pillow         | >= 8.0   | 图像处理和显示 |
| numpy          | >= 1.19  | 数值计算       |
| matplotlib     | >= 3.3   | 绘制图表       |
| scikit-image   | >= 0.18  | 颜色空间转换   |
| colour-science | >= 0.4   | CIE色度图绘制  |

## 使用方法

### 启动程序

运行 `color_analyzer.py` 后，会弹出文件选择对话框，选择要分析的图片。

### 基本操作

#### 1. 选择分析点

- 直接在图像上**点击**即可添加分析点
- 最多可以添加 **10个点**
- 每个点会显示彩色圆圈标记和序号

#### 2. 查看数据

- **点分析表格**：右侧面板显示所有点的坐标数据

  - 位置坐标 (x, y)
  - RGB 值
  - CIE 1931 xy 坐标
  - CIE 1976 u'v' 坐标
  - CIELAB 值
- **色彩调色板**：以卡片形式展示每个点的颜色信息

#### 3. 查看图表

点击顶部工具栏的按钮：

- **CIE色度坐标图**：显示点在CIE 1931和CIE 1976 UCS色度图上的位置
- **LAB色彩空间图**：显示三维LAB色彩空间球体及点的位置

#### 4. 保存结果

- **保存标记图像**：导出带有标记点的原始图片
- **保存CIE坐标图**：导出CIE色度图（PNG/PDF格式）
- **保存LAB空间图**：导出LAB三维色彩空间图（PNG/PDF格式）

#### 5. 其他功能

- **清除所有点**：删除所有已选择的点
- **显示点信息**：弹出详细信息窗口，展示所有点的完整数据
- **更改图片**：加载新的图片进行分析
- **放大/缩小**：调整图像显示比例

### 快捷键

| 快捷键              | 功能         |
| ------------------- | ------------ |
| `Ctrl + 鼠标滚轮` | 缩放图像     |
| `↑ ↓ ← →`     | 移动图像视图 |

## 色彩空间说明

### RGB

设备相关的色彩空间，使用红(R)、绿(G)、蓝(B)三个通道表示颜色，取值范围 0-255。

### CIE 1931 xy

国际照明委员会(CIE)定义的二维色度坐标系统，常用于色彩科学和照明工程。

### CIE 1976 u'v' (UCS)

均匀色度空间(Uniform Chromaticity Scale)，对CIE 1931进行改进，使色差感知更均匀。

### CIELAB

三维色彩空间：

- **L**：明度 (0=黑色，100=白色)
- **a**：绿-红轴 (负值=绿，正值=红)
- **b**：蓝-黄轴 (负值=蓝，正值=黄)

## 文件说明

```
Lighting_Visual/
│
├── color_analyzer.py          # 主程序入口
├── README.md                  # 本文档
└── requirements.txt           # 依赖包列表
```

## 注意事项

1. **中文字体显示**：程序已配置支持中文字体（微软雅黑/黑体），Windows系统可直接使用
2. **图像尺寸**：建议使用分辨率不超过4K的图片以获得最佳性能
3. **点数限制**：最多选择10个分析点，超过限制会提示警告
4. **颜色精度**：使用标准D65光源进行色彩空间转换
5. **保存格式**：
   - 标记图像：支持PNG、JPG等格式
   - 分析图表：推荐使用PNG格式（高清）或PDF格式（矢量）

## 技术特点

- ✅ 精确的sRGB到XYZ颜色空间转换（包含gamma校正）
- ✅ 符合CIE标准的色彩计算
- ✅ 现代化深色主题UI设计
- ✅ 响应式布局，支持窗口缩放

---

**开发语言**: Python 3.x
**GUI框架**: Tkinter
**数据可视化**: Matplotlib
**色彩科学**: Colour Science Library
